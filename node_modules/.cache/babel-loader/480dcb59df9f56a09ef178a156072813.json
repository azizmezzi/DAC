{"ast":null,"code":"import _classCallCheck from \"/home/aziz/Bureau/ap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/aziz/Bureau/ap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/aziz/Bureau/ap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/aziz/Bureau/ap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/aziz/Bureau/ap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/aziz/Bureau/ap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/aziz/Bureau/ap/src/views/RegimeView/Diet/rowDiet2.js\";\n\n/* eslint-disable array-callback-return */\n\n/* eslint-disable consistent-return */\n\n/* eslint-disable eqeqeq */\n\n/* eslint-disable radix */\n\n/* eslint-disable react/no-string-refs */\n\n/* eslint-disable no-console */\n\n/* eslint-disable class-methods-use-this */\n\n/* eslint-disable react/destructuring-assignment */\nimport React, { Component, Fragment } from 'react';\nimport { FormInput, ButtonGroup, Button } from 'shards-react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrash, faPencilAlt, faEye } from '@fortawesome/free-solid-svg-icons';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nimport { NotificationManager } from 'react-notifications';\nimport 'react-notifications/lib/notifications.css';\n\nvar RowDiet2 =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RowDiet2, _Component);\n\n  function RowDiet2(props) {\n    var _this;\n\n    _classCallCheck(this, RowDiet2);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RowDiet2).call(this, props));\n    _this.state = {\n      validDietName: false,\n      InvalidDietName: false,\n      idUser: 0,\n      Role: 2,\n      edit: false,\n      Diet: [{\n        idDiet: 0,\n        DietName: ''\n      }],\n      change: {\n        DietName: _this.props.detail.DietName\n      }\n    };\n\n    _this.deletedDiet = function () {\n      confirmAlert({\n        title: 'supprimer ',\n        message: 'Vous etes sur de supprimer cette vache ?',\n        buttons: [{\n          label: 'Yes',\n          onClick: function onClick() {\n            _this.deletedNotification(_this.props.detail.DietName);\n\n            _this.props.delete(_this.props.index);\n          }\n        }, {\n          label: 'No',\n          onClick: function onClick() {\n            _this.NodeletedNotification();\n          }\n        }]\n      });\n    };\n\n    _this.renderActions = function () {\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(ButtonGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(Button, {\n        outline: true,\n        pill: true,\n        theme: \"success\",\n        onClick: function onClick() {\n          _this.props.editDietFooder(_this.props.detail.idDiet, _this.props.detail.DietName);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        size: \"lg\",\n        icon: _this.state.Role === 2 ? faEye : faPencilAlt,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      })), _this.state.Role < 2 ? React.createElement(Button, {\n        outline: true,\n        pill: true,\n        theme: \"danger\",\n        onClick: function onClick() {\n          _this.deletedDiet();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        size: \"lg\",\n        icon: faTrash,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      })) : React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      })));\n    };\n\n    _this.editing = function () {\n      var _this$state = _this.state,\n          edit = _this$state.edit,\n          Diet = _this$state.Diet;\n      console.log(_this.state);\n\n      _this.setState({\n        edit: !edit,\n        Diet: Diet\n      });\n\n      console.log({\n        edit: edit\n      });\n    };\n\n    _this.handleChange = function (e) {\n      var _this$state2 = _this.state,\n          edit = _this$state2.edit,\n          Diet = _this$state2.Diet,\n          change = _this$state2.change;\n      change[e.target.id] = e.target.value; //* ****************************** */\n      // nraja3 el stateel jdida eli feha ken eli tbadlou w mel chira lo5ra\n      // nthabet ken tbadlet hawka nbadalha ken tbadletech nbadelhech\n\n      _this.setState({\n        edit: edit,\n        Diet: Diet,\n        change: change\n      });\n\n      console.log(_this.state);\n    };\n\n    _this.onEdit = function (e) {\n      e.preventDefault();\n      console.log('this.state.change.DietName');\n      console.log(_this.state.change.DietName);\n\n      if (_this.state.change.DietName === '') {\n        _this.setState({\n          validDietName: true,\n          InvalidDietName: false\n        });\n      } else _this.setState({\n        validDietName: false,\n        InvalidDietName: true\n      });\n\n      var unicite = false;\n      var oldDiet = _this.props.oldDiet;\n\n      if (_this.state.change.DietName != '') {\n        var oldDiets = oldDiet.filter(function (oldFood) {\n          if (oldFood.DietName === _this.state.change.DietName) return oldFood;\n        });\n\n        if (oldDiets.length > 0) {\n          if (oldDiets.length === 1 && oldDiets[0].idDiet === _this.props.detail.idDiet) {\n            unicite = true;\n          } else {\n            NotificationManager.error('Nom existant', '', 3000);\n          }\n        } else {\n          unicite = true;\n        }\n      }\n\n      if (_this.state.change.DietName != '' && unicite) {\n        var change = _this.state.change;\n        console.log('change :');\n        console.log(change);\n\n        _this.props.edit(_this.props.index, change);\n\n        _this.editing();\n      }\n    };\n\n    _this.renderUpdate = function () {\n      return React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"center\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        className: \"td2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, _this.props.detail.idDiet), React.createElement(\"td\", {\n        className: \"td2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(FormInput, {\n        valid: _this.state.InvalidDietName,\n        invalid: _this.state.validDietName,\n        type: \"text\",\n        onChange: _this.handleChange,\n        disabled: _this.state.Role === 2,\n        ref: \"DietName\",\n        defaultValue: _this.props.detail.DietName,\n        id: \"DietName\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        className: \"td2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, ' ', React.createElement(ButtonGroup, {\n        size: \"sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(Button, {\n        outline: true,\n        pill: true,\n        theme: \"primary\",\n        onClick: _this.onEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons bg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"check\"))))));\n    };\n\n    _this.NodeletedNotification = _this.NodeletedNotification.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.deletedNotification = _this.deletedNotification.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.notificationDOMRef = React.createRef();\n    return _this;\n  }\n\n  _createClass(RowDiet2, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var idUser = localStorage.getItem('idUser');\n      var Role = localStorage.getItem('Role');\n      this.setState({\n        Role: parseInt(Role),\n        idUser: parseInt(idUser)\n      });\n    }\n  }, {\n    key: \"NodeletedNotification\",\n    value: function NodeletedNotification() {\n      NotificationManager.warning('Regime non supprimer', '', 3000);\n    }\n  }, {\n    key: \"deletedNotification\",\n    value: function deletedNotification(DietName) {\n      NotificationManager.info(\"Regime supprimer \".concat(DietName));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var edit = this.state.edit;\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, edit ? this.renderUpdate() : this.renderActions());\n    }\n  }]);\n\n  return RowDiet2;\n}(Component);\n\nexport default RowDiet2;","map":{"version":3,"sources":["/home/aziz/Bureau/ap/src/views/RegimeView/Diet/rowDiet2.js"],"names":["React","Component","Fragment","FormInput","ButtonGroup","Button","FontAwesomeIcon","faTrash","faPencilAlt","faEye","confirmAlert","NotificationManager","RowDiet2","props","state","validDietName","InvalidDietName","idUser","Role","edit","Diet","idDiet","DietName","change","detail","deletedDiet","title","message","buttons","label","onClick","deletedNotification","delete","index","NodeletedNotification","renderActions","editDietFooder","editing","console","log","setState","handleChange","e","target","id","value","onEdit","preventDefault","unicite","oldDiet","oldDiets","filter","oldFood","length","error","renderUpdate","bind","notificationDOMRef","createRef","localStorage","getItem","parseInt","warning","info"],"mappings":"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","sourcesContent":["/* eslint-disable array-callback-return */\n/* eslint-disable consistent-return */\n/* eslint-disable eqeqeq */\n/* eslint-disable radix */\n/* eslint-disable react/no-string-refs */\n/* eslint-disable no-console */\n/* eslint-disable class-methods-use-this */\n/* eslint-disable react/destructuring-assignment */\n\nimport React, { Component, Fragment } from 'react';\nimport { FormInput, ButtonGroup, Button } from 'shards-react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrash, faPencilAlt, faEye } from '@fortawesome/free-solid-svg-icons';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nimport { NotificationManager } from 'react-notifications';\nimport 'react-notifications/lib/notifications.css';\n\nclass RowDiet2 extends Component {\n  state = {\n    validDietName: false,\n    InvalidDietName: false,\n    idUser: 0,\n    Role: 2,\n    edit: false,\n    Diet: [{ idDiet: 0, DietName: '' }],\n    change: { DietName: this.props.detail.DietName }\n  };\n\n  constructor(props) {\n    super(props);\n    this.NodeletedNotification = this.NodeletedNotification.bind(this);\n    this.deletedNotification = this.deletedNotification.bind(this);\n    this.notificationDOMRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const idUser = localStorage.getItem('idUser');\n    const Role = localStorage.getItem('Role');\n    this.setState({\n      Role: parseInt(Role),\n      idUser: parseInt(idUser)\n    });\n  }\n\n  deletedDiet = () => {\n    confirmAlert({\n      title: 'supprimer ',\n      message: 'Vous etes sur de supprimer cette vache ?',\n      buttons: [\n        {\n          label: 'Yes',\n          onClick: () => {\n            this.deletedNotification(this.props.detail.DietName);\n            this.props.delete(this.props.index);\n          }\n        },\n        {\n          label: 'No',\n          onClick: () => {\n            this.NodeletedNotification();\n          }\n        }\n      ]\n    });\n  };\n\n  renderActions = () => {\n    return (\n      <Fragment>\n        <ButtonGroup>\n          <Button\n            outline\n            pill\n            theme=\"success\"\n            onClick={() => {\n              this.props.editDietFooder(\n                this.props.detail.idDiet,\n                this.props.detail.DietName\n              );\n            }}\n          >\n            <FontAwesomeIcon\n              size=\"lg\"\n              icon={this.state.Role === 2 ? faEye : faPencilAlt}\n            />\n          </Button>\n          {this.state.Role < 2 ? (\n            <Button\n              outline\n              pill\n              theme=\"danger\"\n              onClick={() => {\n                this.deletedDiet();\n              }}\n            >\n              <FontAwesomeIcon size=\"lg\" icon={faTrash} />\n            </Button>\n          ) : (\n            <Fragment />\n          )}\n        </ButtonGroup>\n      </Fragment>\n    );\n  };\n\n  editing = () => {\n    const { edit, Diet } = this.state;\n    console.log(this.state);\n    this.setState({\n      edit: !edit,\n      Diet\n    });\n    console.log({ edit });\n  };\n  /*\n  handleChange = (e) => {\n    let { edit, animaux } = this.state;\n    console.log(e.target.value)\n \n    this.setState({ edit, animaux: { [e.target.id]: e.target.value } });\n    console.log(\"ba3ed edit\")\n    console.log(this.state)\n \n  } */\n\n  handleChange = e => {\n    const { edit, Diet, change } = this.state;\n    change[e.target.id] = e.target.value;\n    //* ****************************** */\n    // nraja3 el stateel jdida eli feha ken eli tbadlou w mel chira lo5ra\n    // nthabet ken tbadlet hawka nbadalha ken tbadletech nbadelhech\n\n    this.setState({\n      edit,\n      Diet,\n      change\n    });\n    console.log(this.state);\n  };\n\n  onEdit = e => {\n    e.preventDefault();\n    console.log('this.state.change.DietName');\n    console.log(this.state.change.DietName);\n    if (this.state.change.DietName === '') {\n      this.setState({\n        validDietName: true,\n        InvalidDietName: false\n      });\n    } else\n      this.setState({\n        validDietName: false,\n        InvalidDietName: true\n      });\n\n    let unicite = false;\n    const { oldDiet } = this.props;\n\n    if (this.state.change.DietName != '') {\n      const oldDiets = oldDiet.filter(oldFood => {\n        if (oldFood.DietName === this.state.change.DietName) return oldFood;\n      });\n\n      if (oldDiets.length > 0) {\n        if (\n          oldDiets.length === 1 &&\n          oldDiets[0].idDiet === this.props.detail.idDiet\n        ) {\n          unicite = true;\n        } else {\n          NotificationManager.error('Nom existant', '', 3000);\n        }\n      } else {\n        unicite = true;\n      }\n    }\n    if (this.state.change.DietName != '' && unicite) {\n      const { change } = this.state;\n      console.log('change :');\n      console.log(change);\n      this.props.edit(this.props.index, change);\n      this.editing();\n    }\n  };\n\n  NodeletedNotification() {\n    NotificationManager.warning('Regime non supprimer', '', 3000);\n  }\n\n  deletedNotification(DietName) {\n    NotificationManager.info(`Regime supprimer ${DietName}`);\n  }\n\n  renderUpdate = () => {\n    return (\n      <tr>\n        <center>\n          <td className=\"td2\">{this.props.detail.idDiet}</td>\n\n          <td className=\"td2\">\n            <FormInput\n              valid={this.state.InvalidDietName}\n              invalid={this.state.validDietName}\n              type=\"text\"\n              onChange={this.handleChange}\n              disabled={this.state.Role === 2}\n              ref=\"DietName\"\n              defaultValue={this.props.detail.DietName}\n              id=\"DietName\"\n            />\n          </td>\n\n          <td className=\"td2\">\n            {' '}\n            <ButtonGroup size=\"sm\">\n              <Button outline pill theme=\"primary\" onClick={this.onEdit}>\n                <i className=\"material-icons bg\">check</i>\n              </Button>\n            </ButtonGroup>\n          </td>\n        </center>\n      </tr>\n    );\n  };\n\n  render() {\n    const { edit } = this.state;\n\n    return (\n      <Fragment>{edit ? this.renderUpdate() : this.renderActions()}</Fragment>\n    );\n  }\n}\n\nexport default RowDiet2;\n"]},"metadata":{},"sourceType":"module"}